{"remainingRequest":"/Users/zhoufan/Vue/learn/9.商城项目/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhoufan/Vue/learn/9.商城项目/mall/src/views/home/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhoufan/Vue/learn/9.商城项目/mall/src/views/home/Home.vue","mtime":1598024826026},{"path":"/Users/zhoufan/Vue/learn/9.商城项目/mall/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhoufan/Vue/learn/9.商城项目/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhoufan/Vue/learn/9.商城项目/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qSG9tZeWtkOe7hOS7tiovCmltcG9ydCBIb21lU3dpcGVyIGZyb20gJy4vY2hpbGRjb21wb25lbnRzL0hvbWVTd2lwZXInCmltcG9ydCBIb21lUmVjb21tYW5kIGZyb20gIi4vY2hpbGRjb21wb25lbnRzL0hvbWVSZWNvbW1hbmQiOwppbXBvcnQgRmVhdHVyZVZpZXcgZnJvbSAiLi9jaGlsZGNvbXBvbmVudHMvRmVhdHVyZVZpZXciOwoKLypjb21tb27nu4Tku7YqLwppbXBvcnQgTmF2QmFyIGZyb20gJ2NvbXBvbmVudHMvY29tbW9uL25hdmJhci9OYXZCYXInCmltcG9ydCBUYWJDb250cm9sIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3RhYkNvbnRyb2wvVGFiQ29udHJvbCI7CmltcG9ydCBHb29kc0xpc3QgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2dvb2RzTGlzdC9Hb29kc0xpc3QiOwppbXBvcnQgU2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL3Njcm9sbC9TY3JvbGwyIjsKaW1wb3J0IEJhY2tUb3AgZnJvbSAiY29tcG9uZW50cy9jb250ZW50L2JhY2tUb3AvQmFja1RvcCI7CgovKm1peGlucyovCmltcG9ydCB7Z29vZHNMaXN0RGVib3VuY2UsYmFja1RvcH0gZnJvbSAnY29tbW9uL21peGlucycKCi8q572R57uc6K+35rGCKi8KaW1wb3J0IHsKICBnZXRIb21lTXVsdGlkYXRhLAogIGdldEhvbWVHb29kcwp9IGZyb20gIm5ldHdvcmsvaG9tZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIGNvbXBvbmVudHM6ewogICAgTmF2QmFyLAogICAgSG9tZVN3aXBlciwKICAgIEhvbWVSZWNvbW1hbmQsCiAgICBGZWF0dXJlVmlldywKICAgIFRhYkNvbnRyb2wsCiAgICBHb29kc0xpc3QsCiAgICBTY3JvbGwsCiAgICBCYWNrVG9wLAogIH0sCiAgbWl4aW5zOlsKICAgIGdvb2RzTGlzdERlYm91bmNlLAogICAgYmFja1RvcCwKICBdLAogIGRhdGEoKXsKICAgIHJldHVybnsKICAgICAgYmFubmVyczpbXSwKICAgICAgcmVjb21tYW5kczpbXSwKICAgICAgLyrlv4XpobvkvKDlhaXpu5jorqTlgLwqLwogICAgICBjdXJyZW50VGFiTmFtZToncG9wJywKICAgICAgZ29vZHM6ewogICAgICAgICAgJ3BvcCc6e2xpc3Q6W10scGFnZTowfSwKICAgICAgICAgICduZXcnOntsaXN0OltdLHBhZ2U6MH0sCiAgICAgICAgICAnc2VsbCc6e2xpc3Q6W10scGFnZTowfQogICAgICB9LAogICAgICAvL3RhYuagj+WbuuWumumrmOW6pgogICAgICB0YWJDb250cm9sVG9wOjUwMCwKICAgICAgZml4VGFiQ29udHJvbDpmYWxzZSwKICAgICAgY3VycmVudFRhYkluZGV4OjAsCiAgICAgIEE6LTQ4MCwKICAgICAgQjotNDgwLAogICAgICBDOi00ODAsCiAgICB9CiAgfSwKICAvKuW9k+e7hOS7tuWIm+W7uuaXtu+8jOivt+axguaVsOaNriovCiAgY3JlYXRlZCgpIHsKICAgIC8v6K+35rGC6aaW6aG15LiK5pa55pWw5o2uCiAgICB0aGlzLmdldEhvbWVNdWx0aWRhdGEoKTsKCiAgICAvL+ivt+axgummlumhteWVhuWTgeaVsOaNrgogICAgdGhpcy5nZXRIb21lR29vZHMoJ3BvcCcpOwogICAgdGhpcy5nZXRIb21lR29vZHMoJ25ldycpOwogICAgdGhpcy5nZXRIb21lR29vZHMoJ3NlbGwnKQogIH0sCiAgbWV0aG9kczp7CiAgICAvKgogICAgKiAgIOe7hOS7tuebkeWQrOebuOWFswogICAgKiAqLwogICAgLy/nm5HlkKx0YWLngrnlh7sKICAgIHRhYkNsaWNrKGluZGV4KXsKICAgICAgdGhpcy4kbmV4dFRpY2soKCk9PnsKICAgICAgICBzd2l0Y2ggKGluZGV4KSB7CiAgICAgICAgICBjYXNlIDA6ewogICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWJOYW1lID0gJ3BvcCc7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgICBjYXNlIDE6ewogICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWJOYW1lID0gJ25ldyc7CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICB9CiAgICAgICAgICBjYXNlIDI6ewogICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWJOYW1lID0gJ3NlbGwnOwogICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKCiAgICAgIHRoaXMuJHJlZnMudGFiQ29udHJvbDIuY3VycmVudEluZGV4ID0gaW5kZXgKICAgICAgdGhpcy4kcmVmcy50YWJDb250cm9sMS5jdXJyZW50SW5kZXggPSBpbmRleAogICAgfSwKCgogICAgZ2V0U2Nyb2xsUG9zaXRpb24ocG9zaXRpb24pewogICAgICAvL+WGs+WumuWbnuWIsOmhtumDqOaYr+WQpuaYvuekuueahOmrmOW6pgogICAgICB0aGlzLnNob3dCYWNrVG9wID0gKC1wb3NpdGlvbi55KSA+IDEwMDA7CiAgICAgLy8gY29uc29sZS5sb2cocG9zaXRpb24pOwogICAgICAvL+WGs+WumnRhYmJhcuaYr+WQpuWbuuWumgogICAgICB0aGlzLmZpeFRhYkNvbnRyb2wgPSAoLXBvc2l0aW9uLnkpID4gdGhpcy50YWJDb250cm9sVG9wCiAgICB9LAogICAgLy/kuIrmi4nliqDovb3mm7TlpJoKICAgIGxvYWRNb3JlKCl7CiAgICAgIHRoaXMuZ2V0SG9tZUdvb2RzKHRoaXMuY3VycmVudFRhYk5hbWUpCiAgICB9LAogICAgLy/nm5HlkKxzd2lwZXLliqDovb0KICAgIHN3aXBlckltYWdlTG9hZGVkKCl7CiAgICAgIC8v6L+Z6YeM6I635Y+W55qEb2Zmc2V0VG9w5piv5Yiw5pyA6aG256uv55qE77yM5piv5Yiw5YWD57Sg5aSW6Z2i5LiA5bGC5L2N572u5Li6YWJzb2x1dGUvZml4ZWQvcmVsYXRpdmXnmoTlhYPntKDnmoTpobbpg6jnmoTot53nprvvvIzkuZ/lsLHmmK9oZWFkZXLvvIzkvY3nva7kuLpyZWxhdGl2ZQogICAgICB0aGlzLnRhYkNvbnRyb2xUb3AgPSB0aGlzLiRyZWZzLnRhYkNvbnRyb2wxLiRlbC5vZmZzZXRUb3AtNDUKICAgIH0sCgogICAgLyoKICAgICogICDnvZHnu5zor7fmsYIKICAgICogKi8KICAgIGdldEhvbWVNdWx0aWRhdGEoKXsKICAgICAgZ2V0SG9tZU11bHRpZGF0YSgpLnRoZW4ocmVzPT57CiAgICAgICAgdGhpcy5iYW5uZXJzID0gcmVzLmRhdGEuYmFubmVyLmxpc3Q7CiAgICAgICAgdGhpcy5yZWNvbW1hbmRzID0gcmVzLmRhdGEucmVjb21tZW5kLmxpc3QKICAgICAgfSkKICAgIH0sCiAgICBnZXRIb21lR29vZHModHlwZSl7CiAgICAgIGNvbnN0IGdvb2RzUGFnZSA9IHRoaXMuZ29vZHNbdHlwZV0ucGFnZSArIDE7CiAgICAgIGdldEhvbWVHb29kcyh0eXBlLGdvb2RzUGFnZSkudGhlbihyZXM9PnsKICAgICAgICB0aGlzLmdvb2RzW3R5cGVdLmxpc3QucHVzaCguLi5yZXMuZGF0YS5saXN0KTsKICAgICAgICB0aGlzLmdvb2RzW3R5cGVdLnBhZ2UgPSBnb29kc1BhZ2U7CiAgICAgICAgLy90aGlzLiRyZWZzLnNjcm9sbC5maW5pc2hQdWxsVXAoKQogICAgICB9KQogICAgfQogIH0sCgogIGFzY3RpdmF0ZWQoKXsKICAgIC8qaWYgKHRoaXMuY3VycmVudFRhYk5hbWUgPT09ICdwb3AnKXsKICAgICAgLy90aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLHRoaXMudGFiQSwwKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnRhYkEpOwogICAgfQogICAgaWYodGhpcy5jdXJyZW50VGFiTmFtZSA9PT0gJ25ldycpewogICAgICB0aGlzLiRyZWZzLnNjcm9sbC5zY3JvbGxUbygwLHRoaXMudGFiQiwwKQogICAgfQogICAgaWYodGhpcy5jdXJyZW50VGFiTmFtZSA9PT0gJ3NlbGwnKXsKICAgICAgdGhpcy4kcmVmcy5zY3JvbGwuc2Nyb2xsVG8oMCx0aGlzLnRhYkMsMCkKICAgIH0qLwoKICB9LAogIGRlYWN0aXZhdGVkKCl7CiAgICAvL+WPlua2iOWvueWFrOWFsee7hOS7tueahOWFqOWxgOS6i+S7tuebkeWQrAogICAgdGhpcy4kYnVzLiRvZmYoJ2ltYWdlTG9hZGVkJyx0aGlzLmdvb2RzSW1hZ2VMaXN0ZW5lcikKICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <!--navBar-->\n      <nav-bar\n        class=\"row justify-content-around align-items-center shadow-sm nav-bar\"\n        :middleColNum=12>\n        <!--中间插槽-->\n        <div class=\"slot align-items-center\" slot=\"middle\">\n          <div class=\"title text-center\">美丽说</div>\n        </div>\n      </nav-bar>\n      <!--滚动后固定的tabbar-->\n      <tab-control class=\"row tabControl-2\"\n                   :title=\"['Trends','New','Special']\"\n                   :currentTabIndex=\"currentTabIndex\"\n                   @homeTabClick=\"tabClick\"\n                   ref=\"tabControl2\"\n                   v-show=\"fixTabControl\"\n      />\n\n      <!--\n        滚动内容\n      -->\n      <scroll class=\"main-content\"\n              :probeType=\"3\"\n              :pull-up-load=\"true\"\n              ref=\"scroll\"\n              @getScrollPosition=\"getScrollPosition\"\n              @pullUp=\"loadMore\"\n              :data=\"[this.currentTabName,this.currentTabIndex,this.goods]\"\n              :listenScroll=\"true\">\n        <!--swiper-->\n        <div class=\"row swiper\">\n          <div class=\"col\">\n            <home-swiper :banners=\"banners\" @swiperImageLoaded=\"swiperImageLoaded\"></home-swiper>\n          </div>\n        </div >\n\n        <!--Recommends-->\n        <home-recommand class=\"row d-flex align-items-center justify-content-between shadow-sm mt-1 pt-2 pb-2 mb-2\"\n                        :recommands=\"recommands\"\n                        id=\"recommand\"/>\n\n        <!--Feature-->\n        <feature-view class=\"row d-flex align-items-center mb-2\"/>\n\n        <!--TabControl-->\n        <tab-control class=\"row tabControl\"\n                     :title=\"['Trends','New','Special']\"\n                     @homeTabClick=\"tabClick\"\n                     ref=\"tabControl1\"\n                     :class={fixTabControl:fixTabControl}\n                     :currentTabIndex=\"currentTabIndex\"\n        />\n\n        <!--GoodsList-->\n        <goods-list class=\"p-3 goodList-scroll\"\n                    :goods=\"goods[currentTabName].list\"\n        />\n      </scroll>\n\n      <!--BackTop-->\n      <back-top @click.native=\"backUpClick\"\n                v-show=\"showBackTop\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n  /*Home子组件*/\n  import HomeSwiper from './childcomponents/HomeSwiper'\n  import HomeRecommand from \"./childcomponents/HomeRecommand\";\n  import FeatureView from \"./childcomponents/FeatureView\";\n\n  /*common组件*/\n  import NavBar from 'components/common/navbar/NavBar'\n  import TabControl from \"components/common/tabControl/TabControl\";\n  import GoodsList from \"components/content/goodsList/GoodsList\";\n  import Scroll from \"components/common/scroll/Scroll2\";\n  import BackTop from \"components/content/backTop/BackTop\";\n\n  /*mixins*/\n  import {goodsListDebounce,backTop} from 'common/mixins'\n\n  /*网络请求*/\n  import {\n    getHomeMultidata,\n    getHomeGoods\n  } from \"network/home\";\n\n  export default {\n    name: \"Home\",\n    components:{\n      NavBar,\n      HomeSwiper,\n      HomeRecommand,\n      FeatureView,\n      TabControl,\n      GoodsList,\n      Scroll,\n      BackTop,\n    },\n    mixins:[\n      goodsListDebounce,\n      backTop,\n    ],\n    data(){\n      return{\n        banners:[],\n        recommands:[],\n        /*必须传入默认值*/\n        currentTabName:'pop',\n        goods:{\n            'pop':{list:[],page:0},\n            'new':{list:[],page:0},\n            'sell':{list:[],page:0}\n        },\n        //tab栏固定高度\n        tabControlTop:500,\n        fixTabControl:false,\n        currentTabIndex:0,\n        A:-480,\n        B:-480,\n        C:-480,\n      }\n    },\n    /*当组件创建时，请求数据*/\n    created() {\n      //请求首页上方数据\n      this.getHomeMultidata();\n\n      //请求首页商品数据\n      this.getHomeGoods('pop');\n      this.getHomeGoods('new');\n      this.getHomeGoods('sell')\n    },\n    methods:{\n      /*\n      *   组件监听相关\n      * */\n      //监听tab点击\n      tabClick(index){\n        this.$nextTick(()=>{\n          switch (index) {\n            case 0:{\n              this.currentTabName = 'pop';\n              break\n            }\n            case 1:{\n              this.currentTabName = 'new';\n              break\n            }\n            case 2:{\n              this.currentTabName = 'sell';\n              break\n            }\n          }\n        })\n\n        this.$refs.tabControl2.currentIndex = index\n        this.$refs.tabControl1.currentIndex = index\n      },\n\n\n      getScrollPosition(position){\n        //决定回到顶部是否显示的高度\n        this.showBackTop = (-position.y) > 1000;\n       // console.log(position);\n        //决定tabbar是否固定\n        this.fixTabControl = (-position.y) > this.tabControlTop\n      },\n      //上拉加载更多\n      loadMore(){\n        this.getHomeGoods(this.currentTabName)\n      },\n      //监听swiper加载\n      swiperImageLoaded(){\n        //这里获取的offsetTop是到最顶端的，是到元素外面一层位置为absolute/fixed/relative的元素的顶部的距离，也就是header，位置为relative\n        this.tabControlTop = this.$refs.tabControl1.$el.offsetTop-45\n      },\n\n      /*\n      *   网络请求\n      * */\n      getHomeMultidata(){\n        getHomeMultidata().then(res=>{\n          this.banners = res.data.banner.list;\n          this.recommands = res.data.recommend.list\n        })\n      },\n      getHomeGoods(type){\n        const goodsPage = this.goods[type].page + 1;\n        getHomeGoods(type,goodsPage).then(res=>{\n          this.goods[type].list.push(...res.data.list);\n          this.goods[type].page = goodsPage;\n          //this.$refs.scroll.finishPullUp()\n        })\n      }\n    },\n\n    asctivated(){\n      /*if (this.currentTabName === 'pop'){\n        //this.$refs.scroll.scrollTo(0,this.tabA,0)\n        console.log(this.tabA);\n      }\n      if(this.currentTabName === 'new'){\n        this.$refs.scroll.scrollTo(0,this.tabB,0)\n      }\n      if(this.currentTabName === 'sell'){\n        this.$refs.scroll.scrollTo(0,this.tabC,0)\n      }*/\n\n    },\n    deactivated(){\n      //取消对公共组件的全局事件监听\n      this.$bus.$off('imageLoaded',this.goodsImageListener)\n    }\n  }\n</script>\n\n<style scoped>\n  .nav-bar{\n    position: relative;\n    background-color: #ffcccc;\n    height: 45px;\n    z-index: 999;\n  }\n  .title{\n    font-size: 20px;\n    color: floralwhite;\n\n  }\n  #recommand{\n    background-color:white ;\n  }\n  .main-content{\n    height: calc(100vh - 45px - 49px);\n  }\n  .tabControl-2{\n    position: fixed;\n    right: 0;\n    left: 0;\n    z-index: 60;\n    background-color: #fff;\n    padding-left: 15px;\n    padding-right: 15px;\n  }\n</style>\n"]}]}